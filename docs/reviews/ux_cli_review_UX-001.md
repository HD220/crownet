# CrowNet CLI Usability Review (UX-001)

**Date:** 2025-06-26 (Simulated)
**Reviewer:** Agente Jules (UX Specialist Persona)
**Task ID:** UX-001

## 1. Introduction

This document outlines the findings of a usability review for the CrowNet Command Line Interface (CLI). Due to limitations in the development environment (persistent "internal error" with the `run_in_bash_session` tool), this review is primarily based on a **static analysis** of:

-   The CLI Guide (`docs/03_guias/guia_interface_linha_comando.md`)
-   Configuration code (`config/config.go`)
-   Orchestration code (`cli/orchestrator.go`)

Direct execution and observation of CLI behavior with various inputs (especially for help messages and error handling) were not possible. Recommendations requiring code changes are noted as pending the resolution of tool issues.

## 2. Overall Impressions

-   The CLI's mode-based structure with global and mode-specific flags is a standard and generally understandable approach.
-   The existing `guia_interface_linha_comando.md` (CLI Guide) is comprehensive and serves as a strong foundation for user documentation.
-   Error handling appears to use standard Go mechanisms (`fmt.Errorf`, `log.Fatalf`), providing a basis for informative error messages.
-   The recent addition of configuration file support (`config.toml` via FEATURE-003) is a significant usability improvement for managing complex parameter sets.

## 3. Analysis Areas & Recommendations

### 3.1. Help Messages (`-h`, `--help`)

-   **Current State:** Generated by the standard Go `flag` package.
-   **Pros:** Automatic generation, includes default values and types.
-   **Cons/Potential Issues (Conceptual):**
    -   Standard help output can be dense and verbose, potentially overwhelming users with many flags.
    -   May not clearly segregate global vs. mode-specific flags without careful reading.
-   **Recommendations:**
    1.  **(Documentation)** Ensure the main `README.md` and `CONTRIBUTING.md` prominently link to the `guia_interface_linha_comando.md` for detailed, structured help.
    2.  **(Future Enhancement - Blocked by tool issue)** Consider options for more structured help messages if the current output proves unwieldy. This might involve a custom help implementation or a third-party CLI library. For now, focus on extremely clear individual flag descriptions.

### 3.2. Flag Names, Consistency, and Defaults

-   **Current State:** Uses a mix of camelCase (e.g., `-weightsFile`, `-lrBase`, `-stimInputID`) and all lowercase (e.g., `-mode`, `-cycles`, `-epochs`, `-digit`) for flags.
-   **Pros:** Most flag names are reasonably descriptive. Default values (e.g., `ModeSim`, standard filenames) appear sensible. The use of `-1` for "first available" and `-2` for "disable" in certain flags is documented.
-   **Cons/Potential Issues:**
    -   Inconsistent naming convention (camelCase vs. lowercase).
-   **Recommendations:**
    1.  **(Guideline)** For future flags, standardize on one naming convention. Given the existing mix, `camelCase` (like `baseLearningRate`) seems more prevalent for multi-word flags than `snake_case` or `kebab-case` in the current set. Document this choice.
    2.  **(Documentation)** Ensure all default values are explicitly stated in the `guia_interface_linha_comando.md` and are clear in the auto-generated help.
    3.  **(Clarity)** The purpose of highly specific flags like `-stimInputID`, `-stimInputFreqHz`, `-monitorOutputID` is good, but their number reinforces the value of `config.toml` for complex setups.

### 3.3. Error Messages

-   **Current State:** Generated via `fmt.Errorf` in `config/config.go` (validation) and `cli/orchestrator.go` (runtime errors).
-   **Pros:** Error wrapping provides context. The validation in `config.Validate()` already provides good examples of informative messages (e.g., "invalid mode '%s', supported modes are: %s").
-   **Cons/Potential Issues (Conceptual - cannot test exhaustively):**
    -   The user-friendliness of all possible error messages (e.g., for incorrect flag value types, out-of-range values, invalid flag combinations) cannot be fully assessed without runtime testing.
-   **Recommendations:**
    1.  **(Future Testing - Blocked by tool issue)** Once possible, systematically test the CLI with various invalid inputs to observe and refine error messages. Focus on:
        -   Incorrect data types for flags.
        -   Out-of-range values.
        -   Mutually exclusive or dependent flag combinations.
        -   Missing required flags for specific modes.
    2.  **(Guideline)** Ensure all error messages clearly state:
        -   *What* was wrong.
        -   *Why* it was wrong (if not obvious).
        -   If possible, *how to correct it* or what valid options/formats are.

### 3.4. Console Feedback During Operations

-   **Current State:** Uses `fmt.Printf` in `cli/orchestrator.go` for operational output.
-   **Pros:**
    -   Good initialization messages (mode, key configurations).
    -   Periodic progress updates in `sim` mode (cycle count, chemical levels).
    -   Epoch start/completion messages in `expose` mode.
    -   Clear output of results in `observe` mode.
-   **Cons/Potential Issues:**
    -   Lack of verbosity control.
-   **Recommendations:**
    1.  **(Feature Enhancement - Blocked by tool issue)** Introduce verbosity control flags:
        -   `-verbose` (or `-v`): Enable more detailed operational logging (e.g., more frequent updates, internal state details if useful for debugging).
        -   `-quiet` (or `-q`): Suppress all informational output, showing only critical errors or final summary results.
    2.  **(Minor Code Improvement - Blocked by tool issue)** In `cli/orchestrator.go runSimulationLoop`, use `o.Net.ActivePulses.Count()` instead of `len(o.Net.ActivePulses.GetAll())` for potentially better performance when printing pulse count.
    3.  **(Guideline)** Maintain clear distinctions in output: `INFO:`, `WARN:`, `ERROR:` prefixes could be adopted for console messages if a simple logging wrapper is introduced, though this is a larger change.

### 3.5. Terminology Consistency

-   **Current State:** Terms like "Cycle", "Epoch", "ModeSim", etc., appear consistent between code, output, and the CLI guide.
-   **Recommendations:**
    1.  **(Process)** Maintain a glossary or style guide for CLI/documentation terms to ensure future consistency as the project evolves.

## 4. Conclusion

The CrowNet CLI provides a functional interface with good foundational documentation. The primary areas for usability enhancement revolve around more robust error message testing (once possible), refined help messages, and user-controlled verbosity. Many of these are typical refinements for a CLI application as it matures.

The current tool limitations significantly hinder a full, interactive UX review. This document focuses on what can be assessed through static analysis.
